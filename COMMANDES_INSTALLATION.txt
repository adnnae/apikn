=================================================================
  COMMANDES D'INSTALLATION - Synchronisation des R√®glements
=================================================================

üìã √âTAPE 1: Cr√©er les tables MySQL (30 secondes)
-----------------------------------------------------------------
cd "knachsoft-api - Copie"
node create_tables_reglements.js

R√©sultat attendu:
‚úÖ Tables des r√®glements cr√©√©es avec succ√®s!
üìã Tables cr√©√©es:
   - reglements_clients
   - reglements_fournisseurs
   - historique_reglements_clients
   - historique_reglements_fournisseurs


üìã √âTAPE 2: Ajouter les routes dans server.js (1 minute)
-----------------------------------------------------------------
1. Ouvrir le fichier: server.js
2. Chercher la ligne: app.listen(PORT, () => {
3. JUSTE AVANT cette ligne, ajouter:

// ==================== REGLEMENTS CLIENTS ====================
const reglementsClientsRouter = require('./routes/reglements_clients');
app.use('/api/reglements_clients', reglementsClientsRouter);

// ==================== REGLEMENTS FOURNISSEURS ====================
const reglementsFournisseursRouter = require('./routes/reglements_fournisseurs');
app.use('/api/reglements_fournisseurs', reglementsFournisseursRouter);

4. Sauvegarder le fichier


üìã √âTAPE 3: Red√©marrer le serveur (30 secondes)
-----------------------------------------------------------------
# Arr√™ter le serveur actuel (Ctrl+C)
# Puis red√©marrer:
node server.js

R√©sultat attendu:
‚úÖ API MySQL d√©marr√©e sur http://localhost:4000


üìã √âTAPE 4: Tester l'installation (1 minute)
-----------------------------------------------------------------
node test_reglements.js

R√©sultat attendu:
üß™ Test des r√®glements clients et fournisseurs

üìã Test 1: V√©rification des tables...
‚úÖ 4 tables trouv√©es

üìù Test 2: Insertion r√®glement client...
‚úÖ R√®glement client cr√©√© avec ID: 1

üìù Test 3: Insertion r√®glement fournisseur...
‚úÖ R√®glement fournisseur cr√©√© avec ID: 1

... (autres tests)

‚úÖ ‚úÖ ‚úÖ TOUS LES TESTS R√âUSSIS! ‚úÖ ‚úÖ ‚úÖ
üéâ La synchronisation des r√®glements est pr√™te √† √™tre utilis√©e!


=================================================================
  COMMANDES DE V√âRIFICATION
=================================================================

üìä V√©rifier les tables cr√©√©es:
-----------------------------------------------------------------
mysql -h 212.192.3.44 -u adnane -p default_db

SHOW TABLES LIKE '%reglement%';

DESCRIBE reglements_clients;
DESCRIBE reglements_fournisseurs;


üìä Compter les enregistrements:
-----------------------------------------------------------------
SELECT COUNT(*) FROM reglements_clients;
SELECT COUNT(*) FROM reglements_fournisseurs;


üìä Voir les derniers r√®glements:
-----------------------------------------------------------------
SELECT * FROM reglements_clients ORDER BY dateReglement DESC LIMIT 10;
SELECT * FROM reglements_fournisseurs ORDER BY dateReglement DESC LIMIT 10;


üìä Voir l'historique:
-----------------------------------------------------------------
SELECT * FROM historique_reglements_clients ORDER BY dateAction DESC LIMIT 10;
SELECT * FROM historique_reglements_fournisseurs ORDER BY dateAction DESC LIMIT 10;


=================================================================
  COMMANDES DE TEST API
=================================================================

üì° Tester l'API avec cURL:
-----------------------------------------------------------------

# Cr√©er un r√®glement client
curl -X POST http://localhost:4000/api/reglements_clients \
  -H "Content-Type: application/json" \
  -d "{\"marchandiseId\":1,\"clientId\":1,\"venteId\":1,\"dateReglement\":\"2024-12-19T10:00:00\",\"montant\":500.00,\"modePaiement\":\"espece\",\"reference\":\"REG-001\",\"notes\":\"Test\"}"

# R√©cup√©rer tous les r√®glements clients
curl http://localhost:4000/api/reglements_clients

# R√©cup√©rer un r√®glement par ID
curl http://localhost:4000/api/reglements_clients/1

# R√©cup√©rer les r√®glements d'un client
curl http://localhost:4000/api/reglements_clients/client/1


=================================================================
  COMMANDES DE D√âPANNAGE
=================================================================

‚ùå Probl√®me: Tables non cr√©√©es
-----------------------------------------------------------------
Solution:
node create_tables_reglements.js


‚ùå Probl√®me: Serveur ne d√©marre pas
-----------------------------------------------------------------
Solution:
# V√©rifier les erreurs dans la console
# V√©rifier que les routes sont bien ajout√©es dans server.js


‚ùå Probl√®me: Tests √©chouent
-----------------------------------------------------------------
Solution:
# V√©rifier la connexion MySQL
node -e "require('./db').testConnection().then(() => console.log('OK')).catch(console.error)"

# V√©rifier le fichier .env
cat .env


‚ùå Probl√®me: Endpoints 404
-----------------------------------------------------------------
Solution:
# V√©rifier que les routes sont ajout√©es dans server.js
# Red√©marrer le serveur
node server.js


=================================================================
  COMMANDES FLUTTER
=================================================================

üîÑ Synchroniser depuis Flutter:
-----------------------------------------------------------------
import 'package:knachsoftmobile/services/mysql_sync_service.dart';

// Synchroniser tous les r√®glements
final syncService = MySqlSyncService();
await syncService.syncAllTables();

// Ou synchroniser une table sp√©cifique
await syncService.syncTable('ReglementsClients');
await syncService.syncTable('ReglementsFournisseurs');


üîÑ Forcer une resynchronisation:
-----------------------------------------------------------------
await MySqlSyncService().resetSyncMetadata('ReglementsClients');
await MySqlSyncService().syncTable('ReglementsClients');


=================================================================
  R√âSUM√â DES COMMANDES
=================================================================

Installation compl√®te (3 minutes):
-----------------------------------------------------------------
cd "knachsoft-api - Copie"
node create_tables_reglements.js
# Ajouter les routes dans server.js
node server.js
node test_reglements.js


V√©rification rapide:
-----------------------------------------------------------------
# V√©rifier les tables
mysql -h 212.192.3.44 -u adnane -p default_db -e "SHOW TABLES LIKE '%reglement%';"

# Tester l'API
curl http://localhost:4000/api/reglements_clients


=================================================================
  FIN DES COMMANDES
=================================================================

Pour plus d'informations, consulter:
- COMMENCER_ICI_REGLEMENTS.md (guide rapide)
- README_REGLEMENTS.md (vue d'ensemble)
- GUIDE_SYNC_REGLEMENTS.md (guide d√©taill√©)

Bon d√©ploiement! üöÄ
